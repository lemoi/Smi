{"version":3,"sources":["smi.js"],"names":["_typeof","Symbol","iterator","obj","constructor","Smi","instanceList","renderNum","data","getIns","id","Array","map","val","getHigherIDs","ID","rtValue","push","slice","setIns","content","Attr","__attr__","each","callback","this","forEach","value","testRegExp","RegExp","fns","deepCopy","copyTo","Object","keys","i","undefined","getPrototypeOf","prototype","e","console","warn","bind","Content","initInfo","diff","obj1","obj2","plus","minus","some","length","+","-","deepDiff","Obj1","Obj2","update","instance","A","diffs","_this","prop","__currentState__","a","__opNum__","p","m","__op__","__isSpecial__","_arr1","_arr2","c","Initinfo","__compT","__dataAdd","setPropData","call","nodeValue","EventProxy","evt","nativeEvent","bubbles","immdeiateBubbles","cancelable","defaultPrevented","preventDefault","type","isTrusted","target","timeStamp","currentTarget","init","Type","Clipboard","Composition","Keyboard","Focus","UI","Wheel","Touch","Mouse","Form","Event","copy","cut","paste","compositionend","compositionstart","compositionupdate","keydown","keypress","keyup","focus","blur","scroll","wheel","mousedown","mouseup","mousemove","click","dblclick","mouseover","mouseout","mouseenter","mouseleave","contextmenu","touchstart","touchend","touchmove","touchcancel","change","submit","input","select","_this2","stopPropagation","stopImmediatePropagation","EventModel","rawEvents","compEvents","CompEvent","hasAdd","evtType","hasOwnProperty","evtFunc","self","targetId","dataset","smiid","eventsLine","event","j","h","ins_id","_this3","ins","__eventHandle__","on","insId","handleFunc","root","addEventListener","arr","off","removeEventListener","err","hasOn","remove","eveType","start","topComp_id","__raw__","Component","compT","dataObj","eveLisObj","__prop__","fnsCopy","_raw_","document","createElement","attr","which","opDef","d","para","item","classList","add","style","__id__","share","key","ShareParaList","sharer_id","getShared","test","__eventHandle","deF","render","topCompInfo","ele","build","buildContent","_id","rc","eventModel","appendChild","textNode","createTextNode","result","exec","_arr","rt"],"mappings":"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","file":"smi.js","sourcesContent":["\"use strict\";\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\nvar Smi = function () {\n\tvar instanceList = { renderNum: 0, data: {} };\n\tinstanceList.getIns = function (id) {\n\t\tif (id instanceof Array) {\n\t\t\treturn id.map(function (val) {\n\t\t\t\treturn instanceList.data[val];\n\t\t\t});\n\t\t} else {\n\t\t\treturn instanceList.data[id];\n\t\t}\n\t};\n\tinstanceList.getHigherIDs = function (id) {\n\t\tvar ID = id;\n\t\tvar rtValue = [];\n\t\trtValue.push(ID);\n\t\twhile (!!(ID = ID.slice(0, -2))) {\n\t\t\trtValue.push(ID);\n\t\t}\n\t\treturn rtValue;\n\t};\n\tinstanceList.setIns = function (id, content) {\n\t\tinstanceList.data[id] = content;\n\t};\n\tvar Attr = {};\n\tAttr.__attr__ = [\"class\", \"data\", \"style\", \"id\", \"src\", \"name\", \"value\", \"href\"];\n\tAttr.each = function (callback) {\n\t\tthis.__attr__.forEach(function (value) {\n\t\t\tcallback(value);\n\t\t});\n\t};\n\tAttr.testRegExp = new RegExp(\"_([a-z]+)_$\");\n\tvar fns = {};\n\tfns.deepCopy = function (copyTo, obj) {\n\t\tObject.keys(obj).forEach(function (i) {\n\t\t\tif (obj[i] === undefined) return;else if (obj[i] === null) {\n\t\t\t\tcopyTo[i] = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (Object.getPrototypeOf(obj[i]) === Object.prototype) {\n\t\t\t\tif (i === \"_style_\" && copyTo[i] && Object.getPrototypeOf(copyTo[i]) === Object.prototype) {} else {\n\t\t\t\t\tcopyTo[i] = {};\n\t\t\t\t}\n\t\t\t\tthis.deepCopy(copyTo[i], obj[i]);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tcopyTo[i] = obj[i];\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcopyTo = {};\n\t\t\t\t\tcopyTo[i] = obj[i];\n\t\t\t\t\tconsole.warn(\"the object copyTo may not be a object\");\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t\treturn copyTo;\n\t};\n\tfns.Content = function (initInfo, val) {\n\t\tthis.value = val;\n\t\tthis.initInfo = initInfo !== undefined ? initInfo : \"computed\";\n\t};\n\tfns.diff = function (obj1, obj2) {\n\t\t//以obj1为参考\n\t\tvar plus, minus;\n\t\tif (obj1 === undefined) {\n\t\t\tif (obj2 instanceof Array) {\n\t\t\t\tobj1 = [];\n\t\t\t} else if (Object.getPrototypeOf(obj2) === Object.prototype) {\n\t\t\t\tobj1 = {};\n\t\t\t} else {\n\t\t\t\tobj1 = \" \";\n\t\t\t}\n\t\t}\n\t\tif (obj1 instanceof Array && obj2 instanceof Array) {\n\t\t\tplus = [];\n\t\t\tminus = [];\n\t\t\tobj1.forEach(function (value) {\n\t\t\t\tif (!obj2.some(function (val) {\n\t\t\t\t\treturn value == val;\n\t\t\t\t})) {\n\t\t\t\t\tminus.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tobj2.forEach(function (value) {\n\t\t\t\tif (!obj1.some(function (val) {\n\t\t\t\t\treturn value == val;\n\t\t\t\t})) {\n\t\t\t\t\tplus.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (plus.length === 0 && minus.length === 0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": plus,\n\t\t\t\t\t\"-\": minus\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (Object.getPrototypeOf(obj1) === Object.prototype && Object.getPrototypeOf(obj2) === Object.prototype) {\n\t\t\tplus = {};\n\t\t\tminus = [];\n\t\t\tObject.keys(obj1).forEach(function (i) {\n\t\t\t\tif (obj2[i] === undefined) {\n\t\t\t\t\tminus.push(i);\n\t\t\t\t} else if (obj2[i] === obj1[i]) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tplus[i] = obj2[i];\n\t\t\t\t}\n\t\t\t});\n\t\t\tObject.keys(obj2).forEach(function (i) {\n\t\t\t\tif (obj1[i] === undefined) {\n\t\t\t\t\tplus[i] = obj2[i];\n\t\t\t\t} else if (obj2[i] === obj1[i]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (Object.keys(plus).length === 0 && minus.length === 0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": plus,\n\t\t\t\t\t\"-\": minus\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (typeof obj1 === \"string\" && typeof obj2 === \"string\") {\n\t\t\tif (obj1 === obj2) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": obj2\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\tfns.deepDiff = function (Obj1, Obj2) {\n\t\tfor (var i in Obj1) {\n\t\t\tif (Obj2[i] === undefined) return false;\n\t\t\tif (Obj1[i] === null) {\n\t\t\t\tif (Obj2[i] === null) continue;else return false;\n\t\t\t}\n\t\t\tif (_typeof(Obj1[i]) === \"object\" && _typeof(Obj2[i]) === \"object\") {\n\t\t\t\tif (Object.getPrototypeOf(Obj1[i]) === Object.getPrototypeOf(Obj2[i])) {\n\t\t\t\t\tif (fns.deepDiff(Obj1[i], Obj2[i]) === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (Obj1[i] !== Obj2[i]) return false;\n\t\t\t}\n\t\t}\n\t\tfor (i in Obj2) {\n\t\t\tif (Obj1[i] === undefined) return false;\n\t\t}\n\t\treturn true;\n\t};\n\tfns.update = function (instance) {\n\t\t(function A() {\n\t\t\tAttr.each(function (value) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar i, diffs;\n\t\t\t\tif ((i = this.prop[\"_\" + value + \"_\"]) !== undefined) {\n\t\t\t\t\tdiffs = fns.diff(this.__currentState__[value], i);\n\t\t\t\t\tif (diffs !== true) {\n\t\t\t\t\t\tvar a = {};\n\t\t\t\t\t\ta[value] = diffs;\n\t\t\t\t\t\tthis.__opNum__.push(a);\n\t\t\t\t\t\tif (diffs[\"+\"] instanceof Array) {\n\t\t\t\t\t\t\tthis.__currentState__[value] = i.slice();\n\t\t\t\t\t\t} else if (typeof diffs[\"+\"] === \"string\") {\n\t\t\t\t\t\t\tthis.__currentState__[value] = i;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar plus = Object.keys(diffs[\"+\"]);\n\t\t\t\t\t\t\tvar minus = diffs[\"-\"];\n\t\t\t\t\t\t\tplus.forEach(function (p) {\n\t\t\t\t\t\t\t\t_this.__currentState__[value][p] = i[p];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tminus.forEach(function (m) {\n\t\t\t\t\t\t\t\tdelete _this.__currentState__[value][m];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (this.__opNum__.length !== 0) {\n\t\t\t\tthis.__opNum__.forEach(function (value) {\n\t\t\t\t\tvar i = Object.keys(value)[0];\n\t\t\t\t\tthis.__op__(i, \"+\")(value[i][\"+\"]);\n\t\t\t\t\tthis.__op__(i, \"-\")(value[i][\"-\"]);\n\t\t\t\t}.bind(this));\n\t\t\t\tthis.__opNum__ = [];\n\t\t\t}\n\t\t\tif (this.__isSpecial__) return;\n\t\t\tvar _arr1 = this.content();\n\t\t\tvar _arr2 = instanceList.getIns(this.__currentState__.content);\n\t\t\tif (_arr1 instanceof Array) {\n\t\t\t\t_arr1.forEach(function (c, i) {\n\t\t\t\t\tif (c instanceof Initinfo && c.__compT == _arr2[i].initInfo.__compT) {\n\t\t\t\t\t\tif (fns.deepDiff(c.__dataAdd, _arr2[i].initInfo.__dataAdd) === true) return;\n\t\t\t\t\t\t_arr2[i].value.setPropData(c.__dataAdd);\n\t\t\t\t\t\t_arr2[i].initInfo.__dataAdd = c.__dataAdd;\n\t\t\t\t\t\tA.call(_arr2[i].value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (_arr2[i].initInfo != c) {\n\t\t\t\t\t\t\t_arr2[i].initInfo = c;\n\t\t\t\t\t\t\t_arr2[i].value.nodeValue = c;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (_arr1 instanceof Initinfo) {\n\t\t\t\t\tif (fns.deepDiff(_arr1.__dataAdd, _arr2[0].initInfo.__dataAdd) === true) return;\n\t\t\t\t\t_arr2[0].value.setPropData(_arr1.__dataAdd);\n\t\t\t\t\t_arr2[0].initInfo.__dataAdd = _arr1.__dataAdd;\n\t\t\t\t\tA.call(_arr2[0].value);\n\t\t\t\t} else {\n\t\t\t\t\tif (_arr2[0].initInfo != _arr1) {\n\t\t\t\t\t\t_arr2[0].initInfo = _arr1;\n\t\t\t\t\t\t_arr2[0].value.nodeValue = _arr1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}).call(instance);\n\t};\n\t//事件代理对象\n\tvar EventProxy = function EventProxy(evt) {\n\t\tthis.nativeEvent = evt;\n\t\tthis.bubbles = true;\n\t\tthis.immdeiateBubbles = true;\n\t\tthis.cancelable = evt.cancelable;\n\t\tthis.defaultPrevented = false;\n\t\tthis.preventDefault = evt.preventDefault.bind(evt);\n\t\tthis.type = evt.type;\n\t\tthis.isTrusted = evt.isTrusted;\n\t\tthis.target = evt.target;\n\t\tthis.timeStamp = evt.timeStamp;\n\t\tthis.currentTarget = null;\n\t\tthis.init();\n\t};\n\tEventProxy.Type = {\n\t\tClipboard: [\"clipboardData\"],\n\t\tComposition: [\"data\"],\n\t\tKeyboard: [\"altKey\", \"charCode\", \"ctrlKey\", \"key\", \"keyCode\", \"locale\", \"location\", \"metaKey\", \"repeat\", \"shiftKey\", \"which\"],\n\t\tFocus: [\"relatedTarget\"],\n\t\tUI: [\"detail\", \"view\"],\n\t\tWheel: [\"deltaMode\", \"deltaX\", \"deltaY\", \"deltaZ\"],\n\t\tTouch: [\"altKey\", \"changedTouches\", \"ctrlKey\", \"metaKey\", \"shiftKey\", \"targetTouches\", \"touches\"],\n\t\tMouse: [\"altKey\", \"button\", \"buttons\", \"clientX\", \"clientY\", \"ctrlKey\", \"metaKey\", \"pageX\", \"pageY\", \"relatedTarget\", \"screenX\", \"screenY\", \"shiftKey\", \"offsetX\", \"offsetY\", \"getModifierState\"],\n\t\tForm: []\n\t};\n\tEventProxy.Event = {\n\t\tcopy: \"Clipboard\",\n\t\tcut: \"Clipboard\",\n\t\tpaste: \"Clipboard\",\n\t\tcompositionend: \"Composition\",\n\t\tcompositionstart: \"Composition\",\n\t\tcompositionupdate: \"Composition\",\n\t\tkeydown: \"Keyboard\",\n\t\tkeypress: \"Keyboard\",\n\t\tkeyup: \"Keyboard\",\n\t\tfocus: \"Focus\",\n\t\tblur: \"Focus\",\n\t\tscroll: \"UI\",\n\t\twheel: \"Wheel\",\n\t\tmousedown: \"Mouse\",\n\t\tmouseup: \"Mouse\",\n\t\tmousemove: \"Mouse\",\n\t\tclick: \"Mouse\",\n\t\tdblclick: \"Mouse\",\n\t\tmouseover: \"Mouse\",\n\t\tmouseout: \"Mouse\",\n\t\tmouseenter: \"Mouse\",\n\t\tmouseleave: \"Mouse\",\n\t\tcontextmenu: \"Mouse\",\n\t\ttouchstart: \"Touch\",\n\t\ttouchend: \"Touch\",\n\t\ttouchmove: \"Touch\",\n\t\ttouchcancel: \"Touch\",\n\t\tchange: \"Form\",\n\t\tsubmit: \"Form\",\n\t\tinput: \"Form\",\n\t\tselect: \"Form\"\n\t};\n\tEventProxy.prototype.init = function () {\n\t\tvar _this2 = this;\n\n\t\tEventProxy.Type[EventProxy.Event[this.type]].forEach(function (val) {\n\t\t\t_this2[val] = _this2.nativeEvent[val];\n\t\t});\n\t};\n\tEventProxy.prototype.stopPropagation = function () {\n\t\tthis.bubbles = false;\n\t\tthis.nativeEvent.stopPropagation();\n\t};\n\tEventProxy.prototype.preventDefault = function () {\n\t\tthis.defaultPrevented = true;\n\t\tthis.nativeEvent.preventDefault();\n\t};\n\tEventProxy.prototype.stopImmediatePropagation = function () {\n\t\tthis.immdeiateBubbles = false;\n\t\tthis.bubbles = false;\n\t\tthis.nativeEvent.stopImmediatePropagation();\n\t};\n\tvar EventModel = function EventModel() {\n\t\tthis.rawEvents = {};\n\t\tthis.compEvents = {};\n\t};\n\tEventModel.instanceList = [];\n\tEventModel.CompEvent = [\"init\"];\n\tEventModel.prototype.hasAdd = function (evtType) {\n\t\treturn this.rawEvents.hasOwnProperty(evtType);\n\t};\n\tEventModel.prototype.evtFunc = function (evtType) {\n\t\tvar self = this;\n\t\treturn function (evt) {\n\t\t\tvar length = Object.keys(self.rawEvents[evtType]).length - 1;\n\t\t\tif (length === 0) return;\n\t\t\tvar targetId = evt.target.dataset.smiid;\n\t\t\tvar eventsLine = instanceList.getHigherIDs(targetId);\n\t\t\tvar event = new EventProxy(evt),\n\t\t\t    val,\n\t\t\t    j = 0;\n\t\t\tfor (var i = 0; i < eventsLine.length; i++) {\n\t\t\t\tval = eventsLine[i];\n\t\t\t\tif (self.rawEvents[evtType].hasOwnProperty(val)) {\n\t\t\t\t\tevent.currentTarget = instanceList.getIns(val).value;\n\t\t\t\t\tif (self.rawEvents[evtType][val] instanceof Array) {\n\t\t\t\t\t\tfor (var h in self.rawEvents[evtType][val]) {\n\t\t\t\t\t\t\tself.rawEvents[evtType][val][h](event);\n\t\t\t\t\t\t\tif (!event.immdeiateBubbles) return;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tself.rawEvents[evtType][val](event);\n\t\t\t\t\t}\n\t\t\t\t\tif (!event.bubbles) return;\n\t\t\t\t\tj++;\n\t\t\t\t\tif (j === length) return;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tEventModel.prototype.push = function (ins_id) {\n\t\tvar _this3 = this;\n\n\t\tvar ins = instanceList.getIns(ins_id).value;\n\t\tfor (var i in ins.__eventHandle__) {\n\t\t\tif (!this.hasAdd(i)) this.rawEvents[i] = {};\n\t\t\tthis.rawEvents[i][ins_id] = ins.__eventHandle__[i];\n\t\t}\n\t\tEventModel.CompEvent.forEach(function (val) {\n\t\t\tif (ins.fns.hasOwnProperty(val)) {\n\t\t\t\tif (!_this3.compEvents.hasOwnProperty(val)) _this3.compEvents[val] = {};\n\t\t\t\t_this3.compEvents[val][ins_id] = ins.fns[val].bind(ins);\n\t\t\t}\n\t\t});\n\t};\n\tEventModel.prototype.on = function (type, call, insId) {\n\t\tif (!this.hasAdd(type)) {\n\t\t\tthis.rawEvents[type] = {};\n\t\t\tthis.rawEvents[type][insId] = call;\n\t\t\tthis.rawEvents[type].handleFunc = this.evtFunc(type);\n\t\t\tthis.root.addEventListener(type, this.rawEvents[type].handleFunc, false);\n\t\t\treturn;\n\t\t}\n\t\tif (this.rawEvents[type][insId] !== undefined) {\n\t\t\tvar arr = [];\n\t\t\tarr.push(this.rawEvents[type][insId]);\n\t\t\tarr.push(call);\n\t\t\tthis.rawEvents[type][insId] = arr;\n\t\t} else {\n\t\t\tthis.rawEvents[type][insId] = call;\n\t\t}\n\t};\n\tEventModel.prototype.off = function (type, insId) {\n\t\ttry {\n\t\t\tdelete this.rawEvents[type][insId];\n\t\t\tif (Object.keys(this.rawEvents[type]).length === 1) {\n\t\t\t\tthis.root.removeEventListener(type, this.rawEvents[type].handleFunc);\n\t\t\t\tdelete this.rawEvents[type];\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.warn(\"smiid-\" + insId + \" : the \" + type + \" event has not been attached\");\n\t\t}\n\t};\n\tEventModel.prototype.hasOn = function (type, insId) {\n\t\ttry {\n\t\t\tif (this.rawEvents[type].hasOwnProperty(insId)) return true;else return false;\n\t\t} catch (err) {\n\t\t\treturn false;\n\t\t}\n\t};\n\tEventModel.prototype.remove = function (ins_id, eveType) {\n\t\tif (this.rawEvents[eveType][ins_id]) delete this.rawEvents[eveType][ins_id];\n\t};\n\tEventModel.prototype.start = function (topComp_id) {\n\t\tthis.push(topComp_id);\n\t\tthis.root = instanceList.getIns(topComp_id).value.__raw__;\n\t\tvar i;\n\t\tfor (i in this.rawEvents) {\n\t\t\tthis.rawEvents[i].handleFunc = this.evtFunc(i);\n\t\t\tthis.root.addEventListener(i, this.rawEvents[i].handleFunc, false);\n\t\t}\n\t\tEventModel.instanceList.push(this);\n\t\tfor (i in this.compEvents.init) {\n\t\t\tthis.compEvents.init[i]();\n\t\t}\n\t};\n\tvar Component = function Component(compT, dataObj, eveLisObj) {\n\t\tcompT.prop = compT.prop || {};\n\t\tthis.__prop__ = compT.prop;\n\t\tthis.fnsCopy(compT.fns);\n\t\tthis.content = compT.content || function () {\n\t\t\treturn undefined;\n\t\t};\n\t\tthis.setPropData(dataObj);\n\t\tthis.prop._raw_ = this.prop._raw_ || \"div\";\n\t\tthis.__isSpecial__ = false;\n\t\tthis.__raw__ = document.createElement(this.prop._raw_);\n\t\tthis.__eventHandle__ = eveLisObj;\n\t\tthis.__currentState__ = {};\n\t\tthis.__opNum__ = []; //冻结对象\n\t};\n\tComponent.prototype.fnsCopy = function (fns) {\n\t\tthis.fns = {};\n\t\tif (fns === undefined) return;\n\t\tfor (var i in fns) {\n\t\t\tthis.fns[i] = fns[i].bind(this);\n\t\t}\n\t};\n\tComponent.prototype.__op__ = function (attr, which) {\n\t\tvar instance = this;\n\t\tfunction opDef(a, d) {\n\t\t\tswitch (which) {\n\t\t\t\tcase \"+\":\n\t\t\t\t\treturn function (para) {\n\t\t\t\t\t\tif (para !== undefined) a.call(instance, para);\n\t\t\t\t\t};\n\t\t\t\tcase \"-\":\n\t\t\t\t\treturn function (para) {\n\t\t\t\t\t\tif (para !== undefined) d.call(instance, para);\n\t\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tswitch (attr) {\n\t\t\tcase \"class\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.classList.add(item);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.classList.add(para);\n\t\t\t\t\t}\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.classList.remove(item);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.classList.remove(para);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tcase \"data\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tObject.keys(para).forEach(function (item) {\n\t\t\t\t\t\tthis.__raw__.dataset[item] = para[item];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.dataset[item] = \"\";\n\t\t\t\t\t\t\tdelete this.__raw__.dataset[item];\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.dataset[item] = \"\";\n\t\t\t\t\t\tdelete this.__raw__.dataset[para];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tcase \"style\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tObject.keys(para).forEach(function (item) {\n\t\t\t\t\t\tthis.__raw__.style[item] = para[item];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.style[item] = \"\";\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.style[para] = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tdefault:\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tthis.__raw__[attr] = para;\n\t\t\t\t}, function (para) {\n\t\t\t\t\tthis.__raw__[attr] = \"\";\n\t\t\t\t});\n\t\t}\n\t};\n\tComponent.prototype.update = function () {\n\t\tfns.update(this);\n\t};\n\tComponent.prototype.setPropData = function (dataObj) {\n\t\tthis.prop = fns.deepCopy(fns.deepCopy({}, this.__prop__), dataObj);\n\t};\n\tComponent.prototype.off = function (type) {\n\t\tEventModel.instanceList[this.__id__[0]].off(type, this.__id__);\n\t};\n\tComponent.prototype.on = function (type, call) {\n\t\tEventModel.instanceList[this.__id__[0]].on(type, call, this.__id__);\n\t};\n\tComponent.prototype.hasOn = function (type) {\n\t\treturn EventModel.instanceList[this.__id__[0]].hasOn(type, this.__id__);\n\t};\n\tComponent.prototype.share = function (key, value) {\n\t\tif (Component.ShareParaList.hasOwnProperty(key)) {\n\t\t\tif (Component.ShareParaList[key].sharer_id !== this.__id__) console.warn(\"some shared parameter has been covered\");\n\t\t}\n\t\tComponent.ShareParaList[key] = { sharer_id: this.__id__, value: value === undefined ? null : value };\n\t};\n\tComponent.prototype.getShared = function (key) {\n\t\tif (!Component.ShareParaList.hasOwnProperty(key)) {\n\t\t\tconsole.warn(\"the shared value does't exit\");\n\t\t\treturn null;\n\t\t} else {\n\t\t\tif (new RegExp(\"^\" + Component.ShareParaList[key].sharer_id).test(this.__id__)) {\n\t\t\t\treturn Component.ShareParaList[key].value;\n\t\t\t} else {\n\t\t\t\tconsole.warn(\"have no access to get the value\");\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t};\n\tComponent.ShareParaList = {};\n\tvar Initinfo = function Initinfo(obj, dataObj, eveLisObj) {\n\t\tthis.__compT = obj;\n\t\tthis.__dataAdd = dataObj;\n\t\tthis.__eventHandle = eveLisObj;\n\t};\n\tvar deF = function deF(obj) {\n\t\treturn function (dataObj, eveLisObj) {\n\t\t\tdataObj = dataObj || {};\n\t\t\teveLisObj = eveLisObj || {};\n\t\t\treturn new Initinfo(obj, dataObj, eveLisObj);\n\t\t};\n\t};\n\tvar render = function render(topCompInfo, ele) {\n\t\tvar build = function build(init, id) {\n\t\t\tvar buildContent = function buildContent(c) {\n\t\t\t\tvar ID = id + \".\" + _id++;\n\t\t\t\tif (c instanceof Initinfo) {\n\t\t\t\t\tvar rc = build(c, ID);\n\t\t\t\t\tinstance.__currentState__.content.push(ID);\n\t\t\t\t\teventModel.push(ID);\n\t\t\t\t\tinstance.__raw__.appendChild(rc.__raw__);\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar textNode = document.createTextNode(c);\n\t\t\t\t\t\tinstanceList.setIns(ID, new fns.Content(c, textNode));\n\t\t\t\t\t\tinstance.__currentState__.content.push(ID);\n\t\t\t\t\t\tinstance.__raw__.appendChild(textNode);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.warn(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar _id = 0;\n\t\t\tvar instance = new Component(init.__compT, init.__dataAdd, init.__eventHandle);\n\t\t\tinstanceList.setIns(id, new fns.Content(init, instance));\n\t\t\tinstance.__id__ = id;\n\t\t\tinstance.__op__(\"data\", \"+\")({ smiid: id });\n\t\t\tObject.keys(instance.prop).forEach(function (value) {\n\t\t\t\tvar result = Attr.testRegExp.exec(value);\n\t\t\t\tif (result !== null) {\n\t\t\t\t\tswitch (result[1]) {\n\t\t\t\t\t\tcase \"style\":\n\t\t\t\t\t\tcase \"data\":\n\t\t\t\t\t\t\tinstance.__currentState__[result[1]] = {};\n\t\t\t\t\t\t\tfns.deepCopy(instance.__currentState__[result[1]], instance.prop[value]);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"class\":\n\t\t\t\t\t\t\tinstance.__currentState__[result[1]] = instance.prop[value].slice();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tinstance.__currentState__[result[1]] = instance.prop[value];\n\t\t\t\t\t}\n\t\t\t\t\tinstance.__op__(result[1], \"+\")(instance.prop[value]);\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar _arr = instance.content();\n\t\t\tif (_arr === false) {\n\t\t\t\tinstance.__isSpecial__ = true;\n\t\t\t} else {\n\t\t\t\tinstance.__currentState__.content = [];\n\t\t\t\tif (_arr === undefined) {\n\t\t\t\t\tconsole.warn(\"lack of any required parameter\");\n\t\t\t\t\t_arr = \"undefined\";\n\t\t\t\t} else if (_arr === null) {\n\t\t\t\t\t_arr = \"null\";\n\t\t\t\t}\n\t\t\t\tif (_arr instanceof Array) {\n\t\t\t\t\t_arr.forEach(function (c) {\n\t\t\t\t\t\tif (c === undefined) {\n\t\t\t\t\t\t\tconsole.warn(\"lack of any required parameter\");\n\t\t\t\t\t\t\tc = \"undefined\";\n\t\t\t\t\t\t} else if (_arr === null) {\n\t\t\t\t\t\t\tc = \"null\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbuildContent(c);\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tbuildContent(_arr);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn instance;\n\t\t};\n\t\tvar eventModel = new EventModel();\n\t\tvar id = instanceList.renderNum++;\n\t\tvar rt = build(topCompInfo, id + \"\");\n\t\teventModel.start(id);\n\t\tele.appendChild(rt.__raw__);\n\t};\n\treturn {\n\t\tdeF: deF,\n\t\trender: render\n\t};\n}();"],"sourceRoot":"/source/"}