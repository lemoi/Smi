{"version":3,"sources":["smi.js"],"names":["Smi","instanceList","renderNum","data","getIns","id","Array","map","val","getHigherIDs","ID","rtValue","push","slice","setIns","content","Attr","__attr__","each","callback","this","forEach","value","fns","deepCopy","copyTo","obj","Object","keys","i","getPrototypeOf","prototype","e","console","warn","bind","Content","initInfo","undefined","diff","obj1","obj2","plus","minus","some","length","+","-","update","instance","A","diffs","_this","prop","__currentState__","a","__opNum__","p","m","__op__","_arr1","_arr2","c","Initinfo","__compT","__dataAdd","setPropData","call","nodeValue","EventProxy","evt","nativeEvent","bubbles","cancelable","defaultPrevented","preventDefault","type","isTrusted","target","timeStamp","init","Type","Clipboard","Composition","Keyboard","Focus","UI","Wheel","Touch","Mouse","Form","Event","copy","cut","paste","compositionend","compositionstart","compositionupdate","keydown","keypress","keyup","focus","blur","scroll","wheel","mousedown","mouseup","mousemove","click","dblclick","mouseover","mouseout","mouseenter","mouseleave","contextmenu","touchstart","touchend","touchmove","touchcancel","change","submit","input","select","_this2","stopPropagation","EventModel","rawEvents","compEvents","CompEvent","hasAdd","evtType","hasOwnProperty","evtFunc","self","targetId","dataset","smiid","eventsLine","event","currentTarget","ins_id","ins_bind_id","_this3","ins","ins_bind","__eventHandle__","remove","eveType","start","topComp_id","root","__raw__","addEventListener","didmount","Component","compT","dataObj","eveLisObj","__prop__","_raw_","document","createElement","attr","which","opDef","d","para","item","classList","add","style","off","__eventHandle","deF","render","topCompInfo","ele","build","buildContent","_id","rc","eventModel","appendChild","textNode","createTextNode","err","__id__","_arr","rt"],"mappings":"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","file":"smi.js","sourcesContent":["\"use strict\";\n\nvar Smi = function () {\n\tvar instanceList = { renderNum: 0, data: {} };\n\tinstanceList.getIns = function (id) {\n\t\tif (id instanceof Array) {\n\t\t\treturn id.map(function (val) {\n\t\t\t\treturn instanceList.data[val];\n\t\t\t});\n\t\t} else {\n\t\t\treturn instanceList.data[id];\n\t\t}\n\t};\n\tinstanceList.getHigherIDs = function (id) {\n\t\tvar ID = id;\n\t\tvar rtValue = [];\n\t\trtValue.push(ID);\n\t\twhile (!!(ID = ID.slice(0, -2))) {\n\t\t\trtValue.push(ID);\n\t\t}\n\t\treturn rtValue;\n\t};\n\tinstanceList.setIns = function (id, content) {\n\t\tinstanceList.data[id] = content;\n\t};\n\tvar Attr = {};\n\tAttr.__attr__ = [\"class\", \"data\", \"style\", \"id\", \"src\", \"name\", \"value\", \"href\"];\n\tAttr.each = function (callback) {\n\t\tthis.__attr__.forEach(function (value) {\n\t\t\tcallback(value);\n\t\t});\n\t};\n\tvar fns = {};\n\tfns.deepCopy = function (copyTo, obj) {\n\t\tObject.keys(obj).forEach(function (i) {\n\t\t\tif (Object.getPrototypeOf(obj[i]) === Object.prototype) {\n\t\t\t\tif (i === \"_style_\" && copyTo[i] && Object.getPrototypeOf(copyTo[i]) === Object.prototype) {} else {\n\t\t\t\t\tcopyTo[i] = {};\n\t\t\t\t}\n\t\t\t\tthis.deepCopy(copyTo[i], obj[i]);\n\t\t\t} else {\n\t\t\t\ttry {\n\t\t\t\t\tcopyTo[i] = obj[i];\n\t\t\t\t} catch (e) {\n\t\t\t\t\tcopyTo = {};\n\t\t\t\t\tcopyTo[i] = obj[i];\n\t\t\t\t\tconsole.warn(\"the object copyTo may not be a object\");\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(this));\n\t\treturn copyTo;\n\t};\n\tfns.Content = function (initInfo, val) {\n\t\tthis.value = val;\n\t\tthis.initInfo = initInfo !== undefined ? initInfo : \"computed\";\n\t};\n\tfns.diff = function (obj1, obj2) {\n\t\t//以obj1为参考\n\t\tvar plus, minus;\n\t\tif (obj1 === undefined) {\n\t\t\tif (obj2 instanceof Array) {\n\t\t\t\tobj1 = [];\n\t\t\t} else if (Object.getPrototypeOf(obj2) === Object.prototype) {\n\t\t\t\tobj1 = {};\n\t\t\t} else {\n\t\t\t\tobj1 = \" \";\n\t\t\t}\n\t\t}\n\t\tif (obj1 instanceof Array && obj2 instanceof Array) {\n\t\t\tplus = [];\n\t\t\tminus = [];\n\t\t\tobj1.forEach(function (value) {\n\t\t\t\tif (!obj2.some(function (val) {\n\t\t\t\t\treturn value == val;\n\t\t\t\t})) {\n\t\t\t\t\tminus.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tobj2.forEach(function (value) {\n\t\t\t\tif (!obj1.some(function (val) {\n\t\t\t\t\treturn value == val;\n\t\t\t\t})) {\n\t\t\t\t\tplus.push(value);\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (plus.length === 0 && minus.length === 0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": plus,\n\t\t\t\t\t\"-\": minus\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (Object.getPrototypeOf(obj1) === Object.prototype && Object.getPrototypeOf(obj2) === Object.prototype) {\n\t\t\tplus = {};\n\t\t\tminus = [];\n\t\t\tObject.keys(obj1).forEach(function (i) {\n\t\t\t\tif (obj2[i] === undefined) {\n\t\t\t\t\tminus.push(i);\n\t\t\t\t} else if (obj2[i] === obj1[i]) {\n\t\t\t\t\treturn;\n\t\t\t\t} else {\n\t\t\t\t\tplus[i] = obj2[i];\n\t\t\t\t}\n\t\t\t});\n\t\t\tObject.keys(obj2).forEach(function (i) {\n\t\t\t\tif (obj1[i] === undefined) {\n\t\t\t\t\tplus[i] = obj2[i];\n\t\t\t\t} else if (obj2[i] === obj1[i]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (Object.keys(plus).length === 0 && minus.length === 0) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": plus,\n\t\t\t\t\t\"-\": minus\n\t\t\t\t};\n\t\t\t}\n\t\t} else if (typeof obj1 === \"string\" && typeof obj2 === \"string\") {\n\t\t\tif (obj1 === obj2) {\n\t\t\t\treturn true;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\t\"+\": obj2\n\t\t\t\t};\n\t\t\t}\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t};\n\tfns.update = function (instance) {\n\t\t(function A() {\n\t\t\tAttr.each(function (value) {\n\t\t\t\tvar _this = this;\n\n\t\t\t\tvar i, diffs;\n\t\t\t\tif ((i = this.prop[\"_\" + value + \"_\"]) !== undefined) {\n\t\t\t\t\tdiffs = fns.diff(this.__currentState__[value], i);\n\t\t\t\t\tif (diffs !== true) {\n\t\t\t\t\t\tvar a = {};\n\t\t\t\t\t\ta[value] = diffs;\n\t\t\t\t\t\tthis.__opNum__.push(a);\n\t\t\t\t\t\tif (diffs[\"+\"] instanceof Array) {\n\t\t\t\t\t\t\tthis.__currentState__[value] = i.slice();\n\t\t\t\t\t\t} else if (typeof diffs[\"+\"] === \"string\") {\n\t\t\t\t\t\t\tthis.__currentState__[value] = i;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar plus = Object.keys(diffs[\"+\"]);\n\t\t\t\t\t\t\tvar minus = diffs[\"-\"];\n\t\t\t\t\t\t\tplus.forEach(function (p) {\n\t\t\t\t\t\t\t\t_this.__currentState__[value][p] = i[p];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tminus.forEach(function (m) {\n\t\t\t\t\t\t\t\tdelete _this.__currentState__[value][m];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t\tif (this.__opNum__.length !== 0) {\n\t\t\t\tthis.__opNum__.forEach(function (value) {\n\t\t\t\t\tvar i = Object.keys(value)[0];\n\t\t\t\t\tthis.__op__(i, \"+\")(value[i][\"+\"]);\n\t\t\t\t\tthis.__op__(i, \"-\")(value[i][\"-\"]);\n\t\t\t\t}.bind(this));\n\t\t\t\tthis.__opNum__ = [];\n\t\t\t}\n\t\t\tvar _arr1 = this.content();\n\t\t\tvar _arr2 = instanceList.getIns(this.__currentState__.content);\n\t\t\tif (_arr1 instanceof Array) {\n\t\t\t\t_arr1.forEach(function (c, i) {\n\t\t\t\t\tif (c instanceof Initinfo && c.__compT == _arr2[i].initInfo.__compT) {\n\t\t\t\t\t\tif (c.__dataAdd !== undefined) {\n\t\t\t\t\t\t\t_arr2[i].value.setPropData(c.__dataAdd);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tA.call(_arr2[i].value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (_arr2[i].initInfo != c) {\n\t\t\t\t\t\t\t_arr2[i].initInfo = c;\n\t\t\t\t\t\t\t_arr2[i].value.nodeValue = c;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tif (_arr1 instanceof Initinfo) {\n\t\t\t\t\tif (_arr1.__dataAdd !== undefined) {\n\t\t\t\t\t\t_arr2[0].value.setPropData(_arr1.__dataAdd);\n\t\t\t\t\t}\n\t\t\t\t\tA.call(_arr2[0].value);\n\t\t\t\t} else {\n\t\t\t\t\tif (_arr2[0].initInfo != _arr1) {\n\t\t\t\t\t\t_arr2[0].initInfo = _arr1;\n\t\t\t\t\t\t_arr2[0].value.nodeValue = _arr1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}).call(instance);\n\t};\n\t//事件代理对象\n\tvar EventProxy = function EventProxy(evt) {\n\t\tthis.nativeEvent = evt;\n\t\tthis.bubbles = true;\n\t\tthis.cancelable = evt.cancelable;\n\t\tthis.defaultPrevented = false;\n\t\tthis.preventDefault = evt.preventDefault.bind(evt);\n\t\tthis.type = evt.type;\n\t\tthis.isTrusted = evt.isTrusted;\n\t\tthis.target = evt.target;\n\t\tthis.timeStamp = evt.timeStamp;\n\t\tthis.init();\n\t};\n\tEventProxy.Type = {\n\t\tClipboard: [\"clipboardData\"],\n\t\tComposition: [\"data\"],\n\t\tKeyboard: [\"altKey\", \"charCode\", \"ctrlKey\", \"key\", \"keyCode\", \"locale\", \"location\", \"metaKey\", \"repeat\", \"shiftKey\", \"which\"],\n\t\tFocus: [\"relatedTarget\"],\n\t\tUI: [\"detail\", \"view\"],\n\t\tWheel: [\"deltaMode\", \"deltaX\", \"deltaY\", \"deltaZ\"],\n\t\tTouch: [\"altKey\", \"changedTouches\", \"ctrlKey\", \"metaKey\", \"shiftKey\", \"targetTouches\", \"touches\"],\n\t\tMouse: [\"altKey\", \"button\", \"buttons\", \"clientX\", \"clientY\", \"ctrlKey\", \"metaKey\", \"pageX\", \"pageY\", \"relatedTarget\", \"screenX\", \"screenY\", \"shiftKey\", \"offsetX\", \"offsetY\", \"getModifierState\"],\n\t\tForm: []\n\t};\n\tEventProxy.Event = {\n\t\tcopy: \"Clipboard\",\n\t\tcut: \"Clipboard\",\n\t\tpaste: \"Clipboard\",\n\t\tcompositionend: \"Composition\",\n\t\tcompositionstart: \"Composition\",\n\t\tcompositionupdate: \"Composition\",\n\t\tkeydown: \"Keyboard\",\n\t\tkeypress: \"Keyboard\",\n\t\tkeyup: \"Keyboard\",\n\t\tfocus: \"Focus\",\n\t\tblur: \"Focus\",\n\t\tscroll: \"UI\",\n\t\twheel: \"Wheel\",\n\t\tmousedown: \"Mouse\",\n\t\tmouseup: \"Mouse\",\n\t\tmousemove: \"Mouse\",\n\t\tclick: \"Mouse\",\n\t\tdblclick: \"Mouse\",\n\t\tmouseover: \"Mouse\",\n\t\tmouseout: \"Mouse\",\n\t\tmouseenter: \"Mouse\",\n\t\tmouseleave: \"Mouse\",\n\t\tcontextmenu: \"Mouse\",\n\t\ttouchstart: \"Touch\",\n\t\ttouchend: \"Touch\",\n\t\ttouchmove: \"Touch\",\n\t\ttouchcancel: \"Touch\",\n\t\tchange: \"Form\",\n\t\tsubmit: \"Form\",\n\t\tinput: \"Form\",\n\t\tselect: \"Form\"\n\t};\n\tEventProxy.prototype.init = function () {\n\t\tvar _this2 = this;\n\n\t\tEventProxy.Type[EventProxy.Event[this.type]].forEach(function (val) {\n\t\t\t_this2[val] = _this2.nativeEvent[val];\n\t\t});\n\t};\n\tEventProxy.prototype.stopPropagation = function () {\n\t\tthis.bubbles = false;\n\t};\n\tEventProxy.prototype.preventDefault = function () {\n\t\tthis.defaultPrevented = true;\n\t\tthis.nativeEvent.preventDefault();\n\t};\n\tvar EventModel = function EventModel() {\n\t\tthis.rawEvents = {};\n\t\tthis.compEvents = {};\n\t};\n\tEventModel.CompEvent = [\"didmount\"];\n\tEventModel.prototype.hasAdd = function (evtType) {\n\t\treturn this.rawEvents.hasOwnProperty(evtType);\n\t};\n\tEventModel.prototype.evtFunc = function (evtType) {\n\t\tvar self = this;\n\t\treturn function (evt) {\n\t\t\tvar targetId = evt.target.dataset.smiid;\n\t\t\tvar eventsLine = instanceList.getHigherIDs(targetId);\n\t\t\tvar event = new EventProxy(evt),\n\t\t\t    val;\n\t\t\tfor (var i = 0; i < eventsLine.length; i++) {\n\t\t\t\tval = eventsLine[i];\n\t\t\t\tif (self.rawEvents[evtType].hasOwnProperty(val)) {\n\t\t\t\t\tevent.currentTarget = instanceList.getIns(val).value;\n\t\t\t\t\tself.rawEvents[evtType][val](event);\n\t\t\t\t\tif (!event.bubbles) break;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t};\n\tEventModel.prototype.push = function (ins_id, ins_bind_id) {\n\t\tvar _this3 = this;\n\n\t\tvar ins = instanceList.getIns(ins_id).value;\n\t\tvar ins_bind = ins_bind_id === undefined ? false : instanceList.getIns(ins_bind_id).value;\n\t\tfor (var i in ins.__eventHandle__) {\n\t\t\tif (!this.hasAdd(i)) this.rawEvents[i] = {};\n\t\t\tif (ins_bind === false) {\n\t\t\t\tthis.rawEvents[i][ins_id] = ins.__eventHandle__[i];\n\t\t\t} else {\n\t\t\t\tthis.rawEvents[i][ins_id] = ins.__eventHandle__[i].bind(ins_bind);\n\t\t\t}\n\t\t}\n\t\tEventModel.CompEvent.forEach(function (val) {\n\t\t\tif (ins.fns.hasOwnProperty(val)) {\n\t\t\t\tif (!_this3.compEvents.hasOwnProperty(val)) _this3.compEvents[val] = {};\n\t\t\t\t_this3.compEvents[val][ins_id] = ins.fns[val].bind(ins);\n\t\t\t}\n\t\t});\n\t};\n\tEventModel.prototype.remove = function (ins_id, eveType) {\n\t\tif (this.rawEvents[eveType][ins_id]) delete this.rawEvents[eveType][ins_id];\n\t};\n\tEventModel.prototype.start = function (topComp_id) {\n\t\tthis.push(topComp_id);\n\t\tthis.root = instanceList.getIns(topComp_id).value.__raw__;\n\t\tvar i;\n\t\tfor (i in this.rawEvents) {\n\t\t\tthis.root.addEventListener(i, this.evtFunc(i), false);\n\t\t}\n\t\tfor (i in this.compEvents.didmount) {\n\t\t\tthis.compEvents.didmount[i]();\n\t\t}\n\t};\n\tvar Component = function Component(compT, dataObj, eveLisObj) {\n\t\tcompT.prop = compT.prop || {};\n\t\tthis.__prop__ = compT.prop;\n\t\tthis.fns = compT.fns || {};\n\t\tthis.content = compT.content || function () {\n\t\t\treturn undefined;\n\t\t};\n\t\tthis.setPropData(dataObj);\n\t\tthis.prop._raw_ = this.prop._raw_ || \"div\";\n\t\tthis.__raw__ = document.createElement(this.prop._raw_);\n\t\tthis.__eventHandle__ = eveLisObj;\n\t\tthis.__currentState__ = {};\n\t\tthis.__opNum__ = []; //冻结对象\n\t};\n\tComponent.prototype.__op__ = function (attr, which) {\n\t\tvar instance = this;\n\t\tfunction opDef(a, d) {\n\t\t\tswitch (which) {\n\t\t\t\tcase \"+\":\n\t\t\t\t\treturn function (para) {\n\t\t\t\t\t\tif (para !== undefined) a.call(instance, para);\n\t\t\t\t\t};\n\t\t\t\tcase \"-\":\n\t\t\t\t\treturn function (para) {\n\t\t\t\t\t\tif (para !== undefined) d.call(instance, para);\n\t\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\tswitch (attr) {\n\t\t\tcase \"class\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.classList.add(item);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.classList.add(para);\n\t\t\t\t\t}\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.classList.remove(item);\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.classList.remove(para);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tcase \"data\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tObject.keys(para).forEach(function (item) {\n\t\t\t\t\t\tthis.__raw__.dataset[item] = para[item];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.dataset[item] = \"\";\n\t\t\t\t\t\t\tdelete this.__raw__.dataset[item];\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.dataset[item] = \"\";\n\t\t\t\t\t\tdelete this.__raw__.dataset[para];\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tcase \"style\":\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tObject.keys(para).forEach(function (item) {\n\t\t\t\t\t\tthis.__raw__.style[item] = para[item];\n\t\t\t\t\t}.bind(this));\n\t\t\t\t}, function (para) {\n\t\t\t\t\tif (para instanceof Array) {\n\t\t\t\t\t\tpara.forEach(function (item) {\n\t\t\t\t\t\t\tthis.__raw__.style[item] = \"\";\n\t\t\t\t\t\t}.bind(this));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.__raw__.style[para] = \"\";\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tdefault:\n\t\t\t\treturn opDef(function (para) {\n\t\t\t\t\tthis.__raw__[attr] = para;\n\t\t\t\t}, function (para) {\n\t\t\t\t\tthis.__raw__[attr] = \"\";\n\t\t\t\t});\n\t\t}\n\t};\n\tComponent.prototype.update = function () {\n\t\tfns.update(this);\n\t};\n\tComponent.prototype.setPropData = function (dataObj) {\n\t\tthis.prop = fns.deepCopy(fns.deepCopy({}, this.__prop__), dataObj);\n\t};\n\tComponent.prototype.off = function () {};\n\tvar Initinfo = function Initinfo(obj, dataObj, eveLisObj) {\n\t\tthis.__compT = obj;\n\t\tthis.__dataAdd = dataObj;\n\t\tthis.__eventHandle = eveLisObj;\n\t};\n\tvar deF = function deF(obj) {\n\t\treturn function (dataObj, eveLisObj) {\n\t\t\tdataObj = dataObj || {};\n\t\t\teveLisObj = eveLisObj || {};\n\t\t\treturn new Initinfo(obj, dataObj, eveLisObj);\n\t\t};\n\t};\n\tvar render = function render(topCompInfo, ele) {\n\t\tvar build = function build(init, id) {\n\t\t\tvar buildContent = function buildContent(c) {\n\t\t\t\tvar ID = id + \".\" + _id++;\n\t\t\t\tif (c === undefined) {\n\t\t\t\t\tconsole.warn(\"lack of any required parameter\");\n\t\t\t\t\tc = \"undefined\";\n\t\t\t\t}\n\t\t\t\tif (c instanceof Initinfo) {\n\t\t\t\t\tvar rc = build(c, ID);\n\t\t\t\t\tinstance.__currentState__.content.push(ID);\n\t\t\t\t\teventModel.push(ID, id);\n\t\t\t\t\tinstance.__raw__.appendChild(rc.__raw__);\n\t\t\t\t} else {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tvar textNode = document.createTextNode(c);\n\t\t\t\t\t\tinstanceList.setIns(ID, new fns.Content(c, textNode));\n\t\t\t\t\t\tinstance.__currentState__.content.push(ID);\n\t\t\t\t\t\tinstance.__raw__.appendChild(textNode);\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tconsole.warn(err);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\tvar _id = 0;\n\t\t\tvar instance = new Component(init.__compT, init.__dataAdd, init.__eventHandle);\n\t\t\tinstanceList.setIns(id, new fns.Content(init, instance));\n\t\t\tinstance.__id__ = id;\n\t\t\tinstance.__op__(\"data\", \"+\")({ smiid: id });\n\t\t\tAttr.each(function (value) {\n\t\t\t\tvar i;\n\t\t\t\tif ((i = instance.prop[\"_\" + value + \"_\"]) !== undefined) {\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase \"style\":\n\t\t\t\t\t\tcase \"data\":\n\t\t\t\t\t\t\tinstance.__currentState__[value] = {};\n\t\t\t\t\t\t\tfns.deepCopy(instance.__currentState__[value], i);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"class\":\n\t\t\t\t\t\t\tinstance.__currentState__[value] = i.slice();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tinstance.__currentState__[value] = i;\n\t\t\t\t\t}\n\t\t\t\t\tinstance.__op__(value, \"+\")(i);\n\t\t\t\t}\n\t\t\t});\n\t\t\tvar _arr = instance.content();\n\t\t\tinstance.__currentState__.content = [];\n\t\t\tif (_arr === undefined) {\n\t\t\t\tconsole.warn(\"lack of any required parameter\");\n\t\t\t\t_arr = \"undefined\";\n\t\t\t}\n\t\t\tif (_arr instanceof Array) {\n\t\t\t\t_arr.forEach(function (c) {\n\t\t\t\t\tbuildContent(c);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tbuildContent(_arr);\n\t\t\t}\n\t\t\treturn instance;\n\t\t};\n\t\tvar eventModel = new EventModel();\n\t\tvar id = instanceList.renderNum++;\n\t\tvar rt = build(topCompInfo, id + \"\");\n\t\teventModel.start(id);\n\t\tele.appendChild(rt.__raw__);\n\t};\n\treturn {\n\t\tdeF: deF,\n\t\trender: render\n\t};\n}();"],"sourceRoot":"/source/"}