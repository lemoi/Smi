"use strict";var Smi=function(){var t={};t.__attr__=["class","data","style","id"],t.each=function(t){this.__attr__.forEach(function(e){t(e)})};var e={};e.deepCopy=function(t,e){return Object.keys(e).forEach(function(n){if(Object.getPrototypeOf(e[n])===Object.prototype)t[n]&&Object.getPrototypeOf(t[n])===Object.prototype||(t[n]={}),this.deepCopy(t[n],e[n]);else try{t[n]=e[n]}catch(_){t={},t[n]=e[n],console.warn("the object copyTo may not be a object")}}.bind(this)),t},e.Content=function(t,e){this.value=t,this.initInfo=e||"computed"},e.diff=function(t,e){var n,_;return void 0===t&&(t=e instanceof Array?[]:Object.getPrototypeOf(e)===Object.prototype?{}:" "),t instanceof Array&&e instanceof Array?(n=[],_=[],t.forEach(function(t){e.some(function(e){return t==e})||_.push(t)}),e.forEach(function(e){t.some(function(t){return e==t})||n.push(e)}),0===n.length&&0===_.length?!0:{"+":n,"-":_}):Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(e)===Object.prototype?(n={},_=[],Object.keys(t).forEach(function(a){if(void 0===e[a])_.push(a);else{if(e[a]===t[a])return;n[a]=e[a]}}),Object.keys(e).forEach(function(_){if(void 0===t[_])n[_]=e[_];else if(e[_]===t[_])return}),0===Object.keys(n).length&&0===_.length?!0:{"+":n,"-":_}):"string"==typeof t&&"string"==typeof e?t===e?!0:{"+":e}:!1},e.update=function(n){(function a(){t.each(function(t){var n,_,a=this;if(void 0!==(n=this.prop["_"+t+"_"])&&(_=e.diff(this.__currentState__[t],n),_!==!0)){var r={};if(r[t]=_,this.__opNum__.push(r),_["+"]instanceof Array)this.__currentState__[t]=n.map(function(t){return t});else if("string"==typeof _["+"])this.__currentState__[t]=n;else{var o=Object.keys(_["+"]),i=_["-"];o.forEach(function(e){a.__currentState__[t][e]=n[e]}),i.forEach(function(e){delete a.__currentState__[t][e]})}}}.bind(this)),0!==this.__opNum__.length&&(this.__opNum__.forEach(function(t){var e=Object.keys(t)[0];this.__op__(e,"+")(t[e]["+"]),this.__op__(e,"-")(t[e]["-"])}.bind(this)),this.__opNum__=[]);var n=this.content(),r=this.__currentState__.content;n instanceof Array?n.forEach(function(t,e){t instanceof _&&t.__compT==r[e].initInfo.__compT?(void 0!==t.__dataAdd&&r[e].value.setPropData(t.__dataAdd),a.call(r[e].value)):r[e].value.nodeValue=t}):n instanceof _?(void 0!==n.__dataAdd&&r[0].value.setPropData(n.__dataAdd),a.call(r[0].value)):r[0].value.nodeValue=n}).call(n)};var n=function(t,e,n){t.prop=t.prop||{},this.__prop__=t.prop,this.fns=t.fns||{},this.content=t.content||function(){},this.setPropData(e),this.prop._raw_=this.prop._raw_||"div",this.__raw__=document.createElement(this.prop._raw_),this.__eventHandle__=n,this.__currentState__={},this.__opNum__=[]};n.prototype.__op__=function(t,e){function n(t,n){switch(e){case"+":return function(e){void 0!=e&&t.call(_,e)};case"-":return function(t){void 0!=t&&n.call(_,t)}}}var _=this;switch(t){case"class":return n(function(t){t instanceof Array?t.forEach(function(t){this.__raw__.classList.add(t)}.bind(this)):this.__raw__.classList.add(t)},function(t){t instanceof Array?t.forEach(function(t){this.__raw__.classList.remove(t)}.bind(this)):this.__raw__.classList.remove(t)});case"data":return n(function(t){Object.keys(t).forEach(function(e){this.__raw__.dataset[e]=t[e]}.bind(this))},function(t){t instanceof Array?t.forEach(function(t){this.__raw__.dataset[t]="",delete this.__raw__.dataset[t]}.bind(this)):(this.__raw__.dataset[item]="",delete this.__raw__.dataset[t])});case"style":return n(function(t){Object.keys(t).forEach(function(e){this.__raw__.style[e]=t[e]}.bind(this))},function(t){t instanceof Array?t.forEach(function(t){this.__raw__.style[t]=""}.bind(this)):this.__raw__.style[t]=""});default:return n(function(e){this.__raw__[t]=e},function(e){this.__raw__[t]=""})}},n.prototype.update=function(){e.update(this)},n.prototype.setPropData=function(t){this.prop=e.deepCopy(e.deepCopy({},this.__prop__),t)};var _=function(t,e,n){this.__compT=t,this.__dataAdd=e||{},this.__eventHandle=n||{}},a=function(t){return function(e,n){return new _(t,e,n)}},r=function(a,r){var o=function s(a){var r=new n(a.__compT,a.__dataAdd,a.__eventHandle);t.each(function(t){var n;if(void 0!==(n=r.prop["_"+t+"_"])){switch(t){case"style":case"data":r.__currentState__[t]={},e.deepCopy(r.__currentState__[t],n);break;case"class":r.__currentState__[t]=n.map(function(t){return t});break;default:r.__currentState__[t]=n}r.__op__(t,"+")(n)}});var o=r.content();if(r.__currentState__.content=[],void 0==o&&(console.warn("lack of any required parameter"),o="undefined"),o instanceof Array)o.forEach(function(t){if(void 0==t&&(console.warn("lack of any required parameter"),t="undefined"),t instanceof _){var n=s(t);r.__currentState__.content.push(new e.Content(n,t));for(var a in n.__eventHandle__)n.__raw__.addEventListener(a,n.__eventHandle__[a].bind(r));r.__raw__.appendChild(n.__raw__)}else try{var o=document.createTextNode(t);r.__currentState__.content.push(new e.Content(o)),r.__raw__.appendChild(o)}catch(i){console.warn(i)}});else try{var i=document.createTextNode(o);r.__currentState__.content.push(new e.Content(i)),r.__raw__.appendChild(document.createTextNode(o))}catch(c){console.warn(c)}return r},i=o(a);for(var c in i.__eventHandle__)i.__raw__.addEventListener(c,i.__eventHandle__[c]);r.appendChild(i.__raw__)};return{deF:a,render:r}}();
//# sourceMappingURL=smi.js.map
